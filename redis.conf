# Redis Security Configuration
# Password authentication (use strong password in production)
requirepass ${REDIS_PASSWORD}

# ACL Configuration for enhanced security
# Disable dangerous commands
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command CONFIG ""
rename-command SHUTDOWN ""
rename-command DEBUG ""

# Bind to localhost and docker network only (remove 0.0.0.0 for production)
bind 127.0.0.1 ::1

# Enable protected mode
protected-mode yes

# Maximum memory policy
maxmemory 256mb
maxmemory-policy allkeys-lru

# Persistence configuration
save 900 1
save 300 10
save 60 10000

# Append only file (AOF) for better persistence
appendonly yes
appendfsync everysec